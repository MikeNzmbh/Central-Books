{% extends "base.html" %}
{% load static mb_extras %}

{% block content %}
<div id="reconciliation-root" data-bank-account-id="{{ bank_account_id }}"></div>

<!-- Fallback in case JS fails to load -->
<div id="reconciliation-fallback" class="min-h-screen bg-slate-50 text-slate-900 px-4 py-10">
  <div class="mx-auto max-w-3xl rounded-3xl border border-slate-200 bg-white shadow-sm p-6 space-y-3">
    <div class="flex items-center gap-3">
      <div class="h-10 w-10 rounded-xl bg-emerald-100 text-emerald-700 font-semibold flex items-center justify-center">CB</div>
      <div>
        <h1 class="text-lg font-semibold">Reconciliation</h1>
        <p class="text-sm text-slate-500">Loading the reconciliation workspaceâ€¦</p>
      </div>
    </div>
    <p class="text-sm text-slate-600">If this page stays blank, ensure JavaScript is enabled and try reloading. You can also go to <a class="text-sky-600 font-medium" href="/bank-accounts/new/">Add bank account</a> to set up your first account.</p>
  </div>
</div>

{% vite_asset 'reconciliation' as js_path %}
{% if js_path %}
<script type="module" src="{% static js_path %}"></script>
{% else %}
<!-- Vite asset not found for reconciliation -->
{% endif %}

{% vite_asset 'reconciliation' 'css' as css_path %}
{% if css_path %}
<link rel="stylesheet" href="{% static css_path %}">
{% endif %}

<script>
  window.addEventListener("reconciliation-app-mounted", () => {
    const fb = document.getElementById("reconciliation-fallback");
    if (fb) fb.style.display = "none";
  });
</script>
{% endblock %}
