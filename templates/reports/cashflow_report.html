{% extends "base.html" %}
{% load static mb_extras %}

{% block title %}Cashflow report Â· CERN Books{% endblock %}

{% block content %}
<div class="mb-page-shell">
  {% if cf_month_options %}
  <div style="max-width:72rem;margin:0 auto;padding:1rem 1.5rem;">
    <form method="get" style="display:flex;align-items:center;gap:0.5rem;margin-bottom:1rem;">
      <label for="cf-month" style="font-size:0.75rem;font-weight:600;color:#475569;">Period:</label>
      <select id="cf-month" name="cf_month" onchange="this.form.submit()"
        style="font-size:0.8125rem;padding:0.375rem 0.75rem;border:1px solid #e2e8f0;border-radius:0.375rem;background:#fff;color:#0f172a;cursor:pointer;">
        <option value="">Last 6 months</option>
        {% for opt in cf_month_options %}
        <option value="{{ opt.value }}" {% if opt.value==cf_selected_month %}selected{% endif %}>
          {{ opt.label }}
        </option>
        {% endfor %}
      </select>
    </form>
  </div>
  {% endif %}
  <div id="cashflow-report-root"></div>
  <script id="cashflow-report-data" type="application/json">
      {{ cashflow_data_json|safe }}
    </script>
  {% vite_asset 'cashflow-report' 'css' as cashflow_css %}
  {% if cashflow_css %}
  <link rel="stylesheet" href="{% static cashflow_css %}">
  {% endif %}
  {% vite_asset 'cashflow-report' as cashflow_js %}
  {% if cashflow_js %}
  <script type="module" src="{% static cashflow_js %}"></script>
  {% endif %}
</div>
{% endblock %}