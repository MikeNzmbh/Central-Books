{% extends "base.html" %}
{% load static mb_extras %}

{% block title %}Profit & Loss â€“ CERN Books{% endblock %}

{% block content %}
<div id="pl-report-root" data-business-name="{{ business.name }}"
  data-default-period="{{ current_period|default:'this_month' }}"
  data-default-compare="{{ period_compare_to|default:'previous_period' }}">
  <noscript>Please enable JavaScript to view this report.</noscript>
  <div style="display: flex; align-items: center; justify-content: center; min-height: 400px; color: #64748b;">
    <div style="text-align: center;">
      <div
        style="width: 40px; height: 40px; border: 3px solid #e2e8f0; border-top-color: #6366f1; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 16px;">
      </div>
      <p>Loading report...</p>
    </div>
  </div>
</div>
<div id="pl-ssr-fallback-totals" style="display: none;" aria-hidden="true">
  <span class="pl-total-income">${{ total_income|floatformat:2 }}</span>
  <span class="pl-total-expenses">${{ total_expenses|floatformat:2 }}</span>
  <span class="pl-net-profit">${{ net_profit|floatformat:2 }}</span>
</div>

<style>
  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }
</style>

{% vite_asset 'pl-report-print' 'css' as pl_css %}
{% if pl_css %}
<link rel="stylesheet" href="{% static pl_css %}">
{% endif %}
{% vite_asset 'pl-report-print' as pl_js %}
{% if pl_js %}
<script type="module" src="{% static pl_js %}"></script>
{% endif %}
{% endblock %}
