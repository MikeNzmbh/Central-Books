import{a as O,j as e,R as X,r as i}from"./index-CWpMCom8.js";const n={stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},A=t=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[e.jsx("rect",{...n,x:"3",y:"6",width:"18",height:"12",rx:"2"}),e.jsx("circle",{...n,cx:"12",cy:"12",r:"3"}),e.jsx("path",{...n,d:"M6 12h.01M18 12h.01"})]}),S=t=>e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:e.jsx("path",{...n,d:"M12 20h9M16.5 3.5l4 4L7 21H3v-4z"})}),T=t=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[e.jsx("circle",{...n,cx:"12",cy:"12",r:"10"}),e.jsx("path",{...n,d:"M12 8v8M8 12h8"})]}),L=t=>e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:e.jsx("path",{...n,d:"M3 6h18M8 6V4h8v2M6 6l1 14h10l1-14M10 11v6M14 11v6"})}),$=t=>e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:e.jsx("path",{...n,d:"M4 6h16M7 12h10M10 18h4"})}),H=t=>e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:e.jsx("path",{...n,d:"M11 5l-4 4 4 4M7 9h10M13 19l4-4-4-4M17 15H7"})}),P=t=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[e.jsx("circle",{...n,cx:"12",cy:"12",r:"10"}),e.jsx("path",{...n,d:"M12 16v-4M12 8h.01"})]}),V=t=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[e.jsx("path",{...n,d:"m10.3 3.1-8.5 14.9A1 1 0 0 0 3.6 20h16.8a1 1 0 0 0 .8-1.5L12.7 3.1a1 1 0 0 0-1.7 0z"}),e.jsx("path",{...n,d:"M12 9v4M12 17h.01"})]}),z=t=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[e.jsx("circle",{...n,cx:"11",cy:"11",r:"7"}),e.jsx("line",{...n,x1:"16",y1:"16",x2:"21",y2:"21"})]}),q=({filled:t=!0,...a})=>e.jsx("svg",{viewBox:"0 0 24 24",...a,children:t?e.jsx("path",{d:"M12 17.3l-4.2 2.4 1-4.7-3.6-3.3 4.8-.4L12 7l2 4.3 4.8.4-3.6 3.3 1 4.7z",fill:"currentColor"}):e.jsx("path",{...n,fill:"none",d:"M12 17.3l-4.2 2.4 1-4.7-3.6-3.3 4.8-.4L12 7l2 4.3 4.8.4-3.6 3.3 1 4.7z"})}),_=t=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[e.jsx("path",{...n,d:"M10 13a5 5 0 0 0 7 7l2-2a5 5 0 0 0 0-7"}),e.jsx("path",{...n,d:"M14 11a5 5 0 0 0-7-7l-2 2a5 5 0 0 0 0 7"}),e.jsx("path",{...n,d:"M8.5 15.5l7-7"})]}),M=[{id:"TX-10045",date:"2025-11-16",payee:"Stripe Payout",type:"Deposit",category:"Sales",memo:"Online sales batch",statusCode:"CLEARED",statusLabel:"Cleared",amount:1289.45},{id:"TX-10046",date:"2025-11-16",payee:"Uber",type:"Withdrawal",category:"Travel",memo:"Client meeting downtown",statusCode:"UNRECONCILED",statusLabel:"Unreconciled",amount:-24.9},{id:"TX-10047",date:"2025-11-15",payee:"AWS",type:"Withdrawal",category:"Hosting",memo:"Central-Books infra",statusCode:"CLEARED",statusLabel:"Cleared",amount:-210},{id:"TX-10048",date:"2025-11-14",payee:"Founders Coffee",type:"Withdrawal",category:"Meals",memo:"Sprint planning",statusCode:"UNRECONCILED",statusLabel:"Unreconciled",amount:-18.5}],Y=()=>`temp-${Math.random().toString(36).slice(2,10)}`,G=t=>{const a=Number((t==null?void 0:t.amount)??0),c=a>=0?"Deposit":"Withdrawal",d=String((t==null?void 0:t.status)||"").toUpperCase(),h=String((t==null?void 0:t.status_label)||(t==null?void 0:t.status)||d||"Status"),o=String((t==null?void 0:t.counterparty)||(t==null?void 0:t.description)||(t==null?void 0:t.memo)||c);return{id:String((t==null?void 0:t.id)??(t==null?void 0:t.external_id)??Y()),date:String((t==null?void 0:t.date)||""),payee:o,type:c,category:String((t==null?void 0:t.category)||(c==="Deposit"?"Income":"Expense")),memo:String((t==null?void 0:t.memo)||(t==null?void 0:t.description)||""),statusCode:d,statusLabel:h,amount:a}},m=(t,a)=>new Intl.NumberFormat("en-CA",{style:"currency",currency:a}).format(t),U=t=>{const a=(t||"").toUpperCase();return a==="EXCLUDED"||a==="ARCHIVED"},J=t=>{const a=(t||"").toUpperCase();return a==="MATCHED_SINGLE"||a==="MATCHED_MULTI"||a==="CLEARED"?"bg-emerald-50 text-emerald-700 ring-emerald-100":a==="NEW"||a==="UNRECONCILED"||a==="PARTIAL"?"bg-amber-50 text-amber-700 ring-amber-100":a==="EXCLUDED"||a==="ARCHIVED"?"bg-slate-100 text-slate-500 ring-slate-200":"bg-slate-50 text-slate-700 ring-slate-100"},K=t=>{const[a,c]=i.useState("All movement"),[d,h]=i.useState("Active only"),[o,y]=i.useState(""),[j,Z]=i.useState("transactions"),[f,C]=i.useState(t.isFavorite),[B,u]=i.useState(!1),[w,g]=i.useState([]),[I,k]=i.useState(!1),[r,N]=i.useState([]),[p,v]=i.useState(!1);i.useEffect(()=>{if(!t.apiTransactionsUrl){N([]),v(!1);return}let s=!1;return v(!0),fetch(t.apiTransactionsUrl,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(l=>{if(!l.ok)throw new Error("Failed to load transactions");return l.json()}).then(l=>{if(s)return;const x=Array.isArray(l==null?void 0:l.transactions)?l.transactions.map(W=>G(W)):[];N(x)}).catch(l=>{console.error("Failed to load bank transactions:",l),s||N([])}).finally(()=>{s||v(!1)}),()=>{s=!0}},[t.apiTransactionsUrl]),i.useEffect(()=>{if(!t.apiActivityUrl){const s=r.length?r:M;g(s.map((l,x)=>({id:l.id,date:l.date,description:l.memo||l.payee,source:l.type==="Deposit"?"Invoice":"Expense",amount:l.amount,runningBalance:t.balance-x*10})));return}k(!0),fetch(t.apiActivityUrl,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(s=>s.json()).then(s=>{Array.isArray(s.rows)&&g(s.rows.map((l,x)=>({id:l.id??x,date:String(l.date??""),description:String(l.description??""),source:l.source||"Other",amount:Number(l.amount??0),runningBalance:Number(l.running_balance??t.balance)})))}).catch(()=>g([])).finally(()=>k(!1))},[t.apiActivityUrl,t.balance,r.length]);const b=i.useMemo(()=>r.filter(s=>{if(a==="Deposits"&&s.type!=="Deposit"||a==="Withdrawals"&&s.type!=="Withdrawal")return!1;if(o){const l=o.toLowerCase();if(!`${s.payee} ${s.memo} ${s.category}`.toLowerCase().includes(l))return!1}return!(d==="Active only"&&U(s.statusCode)||d==="Archived only"&&!U(s.statusCode))}),[r,a,o,d]),D=()=>{const s=!f;C(s),t.apiToggleFavoriteUrl&&fetch(t.apiToggleFavoriteUrl,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({account_id:t.accountId,favorite:s})}).catch(()=>C(l=>!l))},F=()=>{c("All movement"),h("Active only"),y("")},E=r.length?r:M,R=w.length?w:E.map((s,l)=>({id:s.id,date:s.date,description:s.memo||s.payee,source:s.type==="Deposit"?"Invoice":"Expense",amount:s.amount,runningBalance:t.balance-l*10}));return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-slate-50 to-slate-100 text-slate-900",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-6 px-4 py-6 lg:px-8 lg:py-8",children:[e.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/90 px-3 py-1 text-xs font-medium text-slate-500 shadow-sm ring-1 ring-slate-200",children:[e.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-slate-900 text-white",children:e.jsx(A,{className:"h-3.5 w-3.5"})}),e.jsx("span",{children:"Chart of Accounts · Bank account"})]}),e.jsx("h1",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:t.name||"Bank account"}),e.jsx("p",{className:"max-w-xl text-sm text-slate-500",children:"View this bank account in context of your Chart of Accounts. Edit the account properties and work with every transaction flowing through it without leaving the COA."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 shadow-sm hover:bg-slate-50",children:[e.jsx(P,{className:"h-4 w-4"}),"Reconciliation rules"]}),e.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-slate-800",children:[e.jsx(T,{className:"h-4 w-4"}),"New transaction"]})]})]}),e.jsxs("div",{className:"grid gap-5 lg:grid-cols-[minmax(0,1.15fr)_minmax(0,2fr)]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/90 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-base font-semibold",children:[e.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-white",children:e.jsx(A,{className:"h-4 w-4"})}),t.name||"Bank account"]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Code ",e.jsx("span",{className:"font-mono",children:t.code||"—"})," · Type ",t.type||"Bank"," · Status: Active"]})]}),e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx("button",{onClick:D,className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 hover:bg-slate-50",children:e.jsx(q,{className:`h-4 w-4 ${f?"text-amber-400":"text-slate-300"}`,filled:f})}),e.jsx("a",{href:t.editFormUrl,className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 hover:bg-slate-50",children:e.jsx(S,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-4 px-5 py-4 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2.5",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Ledger balance"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:m(t.balance,t.currency)}),e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[11px] text-emerald-600",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),"In sync with last close"]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2.5",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Bank feed balance"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:m(t.bankFeedBalance,t.currency)}),(()=>{const s=Math.abs(t.balance-t.bankFeedBalance),l=t.unreconciledCount?`${t.unreconciledCount} item${t.unreconciledCount>1?"s":""} to reconcile`:"No items to reconcile";return s<.01?e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[11px] text-emerald-600",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),"In sync with ledger"]}):e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[11px] text-amber-600",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-amber-400"}),"Off by ",m(s,t.currency)," · ",l]})})()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Bank connection"}),e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700 ring-1 ring-emerald-100",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),"Connected"]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2",children:[e.jsxs("div",{className:"font-mono text-[11px] text-slate-500",children:["**** ",t.bankLast4||"0000"]}),e.jsx("div",{className:"mt-0.5 text-[11px] text-slate-500",children:t.bankDisplayName||t.name||"Linked account"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-slate-600",children:"Default posting rules"}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-600",children:[e.jsx("div",{children:"Deposits → 4000 · Sales"}),e.jsx("div",{children:"Fees → 6100 · Bank Fees"}),e.jsx("div",{children:"Transfers → 1999 · Clearing"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-b-3xl border-t border-slate-200 bg-slate-50 px-4 py-3 text-[11px] text-slate-500",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx(V,{className:"h-3.5 w-3.5 text-amber-500"}),t.unreconciledCount||0," unreconciled items since last close."]}),e.jsx("button",{className:"rounded-full border border-slate-300 bg-white px-3 py-1 text-[11px] font-medium text-slate-700 hover:bg-slate-50",children:"Open reconciliation"})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/90 shadow-sm",children:[e.jsxs("div",{className:"border-b border-slate-200 px-5 py-4",children:[e.jsx("div",{className:"text-sm font-semibold",children:"Account metadata"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Change how this bank account appears in your COA. All edits are tracked in the audit log."})]}),e.jsxs("div",{className:"space-y-3 px-5 py-4 text-xs",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[11px] font-medium text-slate-700",children:"Account name"}),e.jsx("input",{className:"h-8 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 text-slate-900",defaultValue:t.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[11px] font-medium text-slate-700",children:"Code"}),e.jsx("input",{className:"h-8 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 font-mono",defaultValue:t.code})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[11px] font-medium text-slate-700",children:"Display group"}),e.jsx("input",{className:"h-8 w-full rounded-xl border border-slate-200 bg-slate-50 px-3",defaultValue:"Operating accounts"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[11px] font-medium text-slate-700",children:"Description"}),e.jsx("input",{className:"h-8 w-full rounded-xl border border-slate-200 bg-slate-50 px-3",defaultValue:"Main CAD operating account connected to CentralBank feed."})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-b-3xl border-t border-slate-200 bg-slate-50 px-4 py-3 text-[11px]",children:[e.jsxs("button",{className:"inline-flex items-center gap-1 text-rose-500 hover:text-rose-600",children:[e.jsx(L,{className:"h-3.5 w-3.5"}),"Archive account"]}),e.jsx("button",{className:"rounded-full bg-slate-900 px-3 py-1 text-white",children:"Save changes"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/90 shadow-sm",children:[e.jsx("div",{className:"border-b border-slate-200 px-5 py-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Transactions"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Create, edit, or delete entries that hit this bank account directly from the COA."})]}),e.jsxs("div",{className:"hidden items-center gap-2 rounded-full bg-slate-50 px-3 py-1 text-[11px] text-slate-500 ring-1 ring-slate-200 md:inline-flex",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),"Live ledger link active"]})]})}),e.jsxs("div",{className:"space-y-3 px-5 py-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{className:"pointer-events-none absolute left-2.5 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-slate-400"}),e.jsx("input",{className:"h-8 w-full rounded-full border border-slate-200 bg-slate-50 pl-8 pr-3 text-xs text-slate-900",placeholder:"Search payee, memo, category",value:o,onChange:s=>y(s.target.value)})]}),e.jsxs("button",{className:"hidden h-8 items-center gap-1 rounded-full border border-slate-200 bg-white px-3 text-[11px] text-slate-700 hover:bg-slate-50 md:inline-flex",children:[e.jsx($,{className:"h-3.5 w-3.5"}),"Filters"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-700 hover:bg-slate-50",children:e.jsx(H,{className:"h-3.5 w-3.5"})}),e.jsxs("button",{onClick:()=>u(!0),className:"inline-flex h-8 items-center gap-1 rounded-full bg-slate-900 px-3 text-[11px] font-semibold text-white hover:bg-slate-800",children:[e.jsx(T,{className:"h-3.5 w-3.5"}),"New transaction"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-[11px] text-slate-600",children:[e.jsx("div",{className:"flex flex-wrap gap-1 rounded-full bg-slate-50 p-1",children:["All movement","Deposits","Withdrawals"].map(s=>e.jsx("button",{onClick:()=>c(s),className:`rounded-full px-2.5 py-1 font-medium ${a===s?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-800"}`,children:s},s))}),e.jsx("div",{className:"flex flex-wrap gap-1 rounded-full bg-slate-50 p-1",children:["Active only","Archived only","Show all"].map(s=>e.jsx("button",{onClick:()=>h(s),className:`rounded-full px-2.5 py-1 font-medium ${d===s?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-800"}`,children:s},s))}),e.jsx("button",{onClick:F,className:"rounded-full border border-slate-200 px-3 py-1 text-[11px] text-slate-600 hover:bg-slate-50",children:"Reset"})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50",children:[e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{className:"bg-slate-50/90",children:e.jsxs("tr",{className:"text-left text-[11px] font-semibold uppercase tracking-[0.14em] text-slate-400",children:[e.jsx("th",{className:"px-3 py-2",children:"Date"}),e.jsx("th",{className:"px-3 py-2",children:"Payee / Source"}),e.jsx("th",{className:"px-3 py-2",children:"Type"}),e.jsx("th",{className:"px-3 py-2",children:"Category"}),e.jsx("th",{className:"px-3 py-2",children:"Memo"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-right"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[p&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-[11px] text-slate-500",children:"Loading transactions…"})}),!p&&b.length===0&&r.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center",children:e.jsxs("div",{className:"mx-auto max-w-sm",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"No transactions yet"}),e.jsxs("div",{className:"mt-1 text-[11px] text-slate-500",children:["When payments start hitting this account, they'll appear here.",t.isBankAccount&&e.jsx("span",{children:" Import a CSV from your bank or connect a bank feed to get started."})]}),t.linkBankFeedUrl&&e.jsx("div",{className:"mt-3",children:e.jsxs("a",{href:t.linkBankFeedUrl,className:"inline-flex items-center gap-1 rounded-full bg-slate-900 px-3 py-1.5 text-[11px] font-semibold text-white hover:bg-slate-800",children:[e.jsx(_,{className:"h-3.5 w-3.5"}),"Open bank feed"]})})]})})}),!p&&b.length===0&&r.length>0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-[11px] text-slate-500",children:"No transactions match your filters."})}),!p&&b.map(s=>e.jsxs("tr",{className:"hover:bg-white",children:[e.jsx("td",{className:"px-3 py-2 font-mono text-[11px] text-slate-600",children:s.date}),e.jsxs("td",{className:"px-3 py-2 text-[11px] text-slate-900",children:[e.jsx("div",{children:s.payee}),e.jsx("div",{className:"mt-0.5 font-mono text-[10px] text-slate-400",children:s.id})]}),e.jsx("td",{className:"px-3 py-2 text-[11px] text-slate-700",children:s.type}),e.jsx("td",{className:"px-3 py-2 text-[11px] text-slate-700",children:e.jsx("span",{className:"inline-flex rounded-full bg-white px-2 py-0.5 text-[10px] ring-1 ring-slate-200",children:s.category||"—"})}),e.jsx("td",{className:"px-3 py-2 text-[11px] text-slate-600",children:s.memo||"—"}),e.jsx("td",{className:"px-3 py-2 text-right font-mono text-[11px]",children:e.jsx("span",{className:s.amount<0?"text-rose-500":"text-emerald-600",children:m(s.amount,t.currency)})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx("span",{className:`inline-flex items-center justify-end gap-1 rounded-full px-2 py-0.5 text-[10px] font-medium ring-1 ${J(s.statusCode)}`,children:s.statusLabel||s.statusCode||"Status"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs("div",{className:"inline-flex items-center gap-1",children:[e.jsx("button",{className:"h-6 w-6 rounded-full text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(S,{className:"h-3.5 w-3.5"})}),e.jsx("button",{className:"h-6 w-6 rounded-full text-rose-400 hover:bg-rose-50 hover:text-rose-600",children:e.jsx(L,{className:"h-3.5 w-3.5"})})]})})]},s.id))]})]}),e.jsxs("div",{className:"border-t border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-500",children:["Showing ",b.length," of ",r.length," transactions."]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-500",children:[e.jsx("div",{className:"font-medium text-slate-900",children:"Recent changes & audit trail"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2 rounded-xl bg-white px-3 py-2",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-emerald-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-[11px]",children:["You renamed this account from “CentralBank-1” to “",t.name,"”."]}),e.jsx("div",{className:"text-[10px] text-slate-400",children:"Today · 14:22 · by you"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 rounded-xl bg-white px-3 py-2",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-sky-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px]",children:"AI suggested category “Travel” for Uber expense. You accepted."}),e.jsx("div",{className:"text-[10px] text-slate-400",children:"Yesterday · Central-Books AI"})]})]})]})]})]})]}),j!=="transactions"&&e.jsx("div",{className:`rounded-3xl border ${j==="reconciliation"?"border-dashed":"border-solid"} border-slate-200 bg-white/80 p-6 text-xs text-slate-500`,children:j==="reconciliation"?e.jsx("p",{children:"This tab will hook into the reconciliation workspace. Provide matches and status here later."}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Ledger lines for this account will appear here."}),t.apiLedgerUrl&&e.jsxs("p",{className:"text-[11px] text-slate-400",children:["Endpoint wired: ",e.jsx("code",{children:t.apiLedgerUrl})]}),I?e.jsx("p",{className:"text-[11px] text-slate-400",children:"Loading activity…"}):e.jsx("div",{className:"space-y-1",children:R.slice(0,5).map(s=>e.jsxs("div",{className:"rounded-xl bg-slate-50 px-3 py-2",children:[e.jsx("div",{className:"text-[11px] text-slate-500",children:s.date}),e.jsx("div",{className:"text-[11px] text-slate-900",children:s.description||"Ledger entry"}),e.jsxs("div",{className:"text-[10px] text-slate-500",children:[s.source," · ",m(s.amount,t.currency)," · Running ",m(s.runningBalance,t.currency)]})]},s.id))})]})})]})]}),B&&e.jsx("div",{className:"fixed inset-0 z-40 flex justify-end bg-slate-900/40",children:e.jsxs("div",{className:"flex h-full w-full max-w-md flex-col bg-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.18em] text-slate-400",children:"New transaction"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Post a manual entry on this account"})]}),e.jsx("button",{onClick:()=>u(!1),className:"rounded-full border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-500 hover:bg-slate-50",children:"Close"})]}),e.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-5 py-4 text-xs text-slate-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Type"}),e.jsxs("div",{className:"inline-flex gap-1 rounded-full bg-slate-50 p-1",children:[e.jsx("button",{className:"rounded-full bg-white px-3 py-1 text-[11px] font-medium text-slate-900 shadow-sm",children:"Deposit"}),e.jsx("button",{className:"rounded-full px-3 py-1 text-[11px] font-medium text-slate-500",children:"Withdrawal"})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Date"}),e.jsx("input",{type:"date",className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Amount"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"rounded-2xl bg-slate-50 px-2 py-1 text-[11px] text-slate-500",children:t.currency}),e.jsx("input",{type:"number",className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800",placeholder:"0.00"})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Description"}),e.jsx("input",{type:"text",className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800",placeholder:"What is this transaction for?"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Memo (optional)"}),e.jsx("textarea",{className:"min-h-[70px] w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-800",placeholder:"Internal note that only you will see"})]}),t.apiCreateManualTxUrl&&e.jsxs("div",{className:"text-[11px] text-slate-400",children:["Will POST to ",e.jsx("code",{children:t.apiCreateManualTxUrl})," once wired."]})]}),e.jsxs("div",{className:"border-t border-slate-100 px-5 py-3 text-right",children:[e.jsx("button",{onClick:()=>u(!1),className:"mr-2 rounded-full border border-slate-200 bg-white px-3 py-1.5 text-[11px] font-medium text-slate-600 hover:bg-slate-50",children:"Cancel"}),e.jsx("button",{className:"inline-flex items-center gap-1 rounded-full bg-slate-900 px-4 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-black",children:"Save transaction"})]})]})})]})})};function Q(){const t=document.getElementById("coa-account-root");if(!t)return;const a=t.dataset||{},c={accountId:Number(a.accountId||"0"),name:a.name||"",code:a.code||"",type:a.type||"Assets",detailType:a.detailType||"Operating bank account",currency:a.currency||"USD",isFavorite:a.isFavorite==="true",isBankAccount:a.isBankAccount==="true",bankLast4:a.bankLast4||null,bankDisplayName:a.bankDisplayName||null,balance:Number(a.balance||"0"),bankFeedBalance:Number(a.bankFeedBalance||"0"),periodDeposits:Number(a.periodDeposits||"0"),periodWithdrawals:Number(a.periodWithdrawals||"0"),periodCount:Number(a.periodCount||"0"),lastReconciledOn:a.lastReconciledOn||null,unreconciledCount:a.unreconciledCount?Number(a.unreconciledCount):null,editFormUrl:a.editFormUrl||"#",linkBankFeedUrl:a.linkBankFeedUrl||void 0,apiActivityUrl:a.apiActivityUrl||void 0,apiLedgerUrl:a.apiLedgerUrl||void 0,apiToggleFavoriteUrl:a.apiToggleFavoriteUrl||void 0,apiCreateManualTxUrl:a.apiCreateManualTxUrl||void 0,apiTransactionsUrl:a.apiTransactionsUrl||void 0};O(t).render(e.jsx(X.StrictMode,{children:e.jsx(K,{...c})}))}Q();
