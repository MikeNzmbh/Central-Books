import{r as x,j as e,a as j}from"./client-CnuwemY9.js";/* empty css              */const g=({messages:s})=>!s||!s.length?null:e.jsx("div",{className:"space-y-2",children:s.map((t,a)=>e.jsx("div",{className:`rounded-2xl border px-4 py-2 text-sm ${t.level==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-rose-200 bg-rose-50 text-rose-700"}`,children:t.message},`${t.message}-${a}`))}),y=s=>{const t="w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2.5 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-900/10";if(s.type==="textarea")return e.jsx("textarea",{id:s.id,name:s.name,defaultValue:s.value,className:`${t} min-h-[120px]`,placeholder:s.help_text||s.label,required:s.required});if(s.type==="select"&&s.choices)return e.jsx("select",{id:s.id,name:s.name,defaultValue:s.value,required:s.required,className:t,children:s.choices.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))});const a=s.type==="password"?"password":s.type==="email"?"email":"text";return e.jsx("input",{id:s.id,name:s.name,type:a,required:s.required,defaultValue:a==="password"?"":s.value,className:t,placeholder:s.help_text||s.label,autoComplete:s.name})},N=({errors:s})=>s.length?e.jsx("ul",{className:"text-xs text-rose-600 space-y-1",children:s.map((t,a)=>e.jsx("li",{children:t},`${t}-${a}`))}):null,v=({markup:s})=>s.length?e.jsx(e.Fragment,{children:s.map((t,a)=>e.jsx("span",{dangerouslySetInnerHTML:{__html:t}},`hidden-${a}`))}):null,c=({form:s,csrfToken:t,action:a,legend:r})=>{if(!s)return e.jsxs("p",{className:"text-sm text-slate-500",children:["Complete your business setup to edit ",r.toLowerCase(),"."]});const n=s.fields.length>2?"grid gap-4 sm:grid-cols-2":"space-y-4";return e.jsxs("form",{method:s.method||"post",action:a||s.action||"",className:"space-y-5",children:[e.jsx("input",{type:"hidden",name:"csrfmiddlewaretoken",value:t}),e.jsx("input",{type:"hidden",name:"form_id",value:s.form_id}),e.jsx(v,{markup:s.hidden_fields}),s.non_field_errors.length>0&&e.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm text-rose-700",children:s.non_field_errors.join(" ")}),e.jsx("div",{className:n,children:s.fields.map(l=>e.jsxs("div",{className:"space-y-1.5 sm:col-span-1",children:[e.jsx("label",{htmlFor:l.id,className:"text-sm font-medium text-slate-700",children:l.label}),y(l),e.jsx(N,{errors:l.errors})]},l.name))}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"inline-flex items-center rounded-2xl bg-slate-900 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-800",children:["Save ",r.toLowerCase()]})})]})},o=({title:s,subtitle:t,children:a,badge:r})=>e.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-4",children:[e.jsxs("header",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.28em] text-slate-400",children:"Central-Books"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:s}),e.jsx("p",{className:"text-sm text-slate-500",children:t})]}),r]}),a]}),f=[{id:"profile",label:"Profile"},{id:"business",label:"Business"},{id:"security",label:"Security"},{id:"sessions",label:"Sessions"}],w=({csrfToken:s,profileForm:t,businessForm:a,passwordForm:r,sessions:n,postUrls:l,messages:p})=>{const[d,h]=x.useState("profile"),b=x.useMemo(()=>{switch(d){case"profile":return e.jsx(o,{title:"Profile",subtitle:"Your personal details for invoices and invites.",children:e.jsx(c,{form:t,csrfToken:s,action:l.profile,legend:"Profile"})});case"business":return e.jsx(o,{title:"Business",subtitle:"Workspace identity, currency, and fiscal year.",badge:e.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-[11px] text-slate-600",children:"Workspace"}),children:e.jsx(c,{form:a,csrfToken:s,action:l.business,legend:"Business"})});case"security":return e.jsx(o,{title:"Security",subtitle:"Update your password; we keep you signed in everywhere.",badge:e.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-[11px] text-emerald-700",children:"Recommended"}),children:e.jsx(c,{form:r,csrfToken:s,action:l.password,legend:"Password"})});case"sessions":return e.jsx(o,{title:"Sessions",subtitle:"Devices currently signed in to Central-Books.",children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3",children:[e.jsx("p",{className:"text-base font-semibold text-slate-900",children:"This device"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[n.current_ip||"0.0.0.0"," Â· ",n.user_agent||"Browser session"]})]}),e.jsxs("form",{method:"post",action:l.logoutAll,className:"flex justify-end",children:[e.jsx("input",{type:"hidden",name:"csrfmiddlewaretoken",value:s}),e.jsx("button",{type:"submit",className:"inline-flex items-center rounded-2xl border border-rose-200 bg-white px-4 py-2 text-xs font-semibold text-rose-600 hover:bg-rose-50",children:"Sign out of all sessions"})]})]})});default:return null}},[d,t,a,r,n,s,l]);return e.jsx("div",{className:"min-h-screen bg-slate-50 px-4 py-10 text-slate-900",children:e.jsxs("div",{className:"mx-auto max-w-6xl space-y-10",children:[e.jsxs("header",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Account"}),e.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Account settings"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Keep your workspace and credentials aligned with this single panel."})]}),e.jsx(g,{messages:p}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[220px,1fr]",children:[e.jsx("aside",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsx("nav",{className:"flex flex-col gap-2",children:f.map(i=>e.jsx("button",{type:"button",onClick:()=>h(i.id),className:`w-full rounded-2xl px-4 py-2 text-left text-sm font-medium transition ${d===i.id?"bg-slate-900 text-white":"bg-slate-50 text-slate-700 hover:bg-slate-100"}`,children:i.label},i.id))})}),e.jsx("div",{children:b})]})]})})},u=document.getElementById("account-settings-root"),m=document.getElementById("account-settings-data");if(u&&m)try{const s=JSON.parse(m.textContent||"{}");j(u).render(e.jsx(w,{...s}))}catch(s){console.error("Unable to parse account settings payload",s)}
