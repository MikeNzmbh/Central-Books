import{r as c,j as e,c as j,R as N}from"./index-CE3UdL73.js";const k=["CAD","USD"];function p(){return Math.random().toString(36).slice(2)}function w({row:n,onChange:l}){return e.jsxs("div",{className:"grid grid-cols-1 gap-3 rounded-2xl border border-slate-100 bg-slate-50/80 px-3.5 py-3 md:grid-cols-4 md:px-4 md:py-3",children:[e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900",children:n.accountName||"New bank account"}),e.jsx("span",{className:"text-xs text-slate-500",children:n.helperText||"This will be your default operating account."})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-slate-400",children:"Bank label"}),e.jsx("input",{type:"text",placeholder:"e.g. RBC Business Chequing",value:n.bankLabel,onChange:a=>l({bankLabel:a.target.value}),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-sm text-slate-900 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/5"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-slate-400",children:"Opening balance"}),e.jsx("input",{type:"number",value:n.openingBalance,onChange:a=>l({openingBalance:a.target.value}),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-right text-sm text-slate-900 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/5"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-slate-400",children:"Currency"}),e.jsx("select",{value:n.currency,onChange:a=>l({currency:a.target.value}),className:"w-full rounded-xl border border-slate-200 bg-white px-2 py-1.5 text-sm text-slate-900 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/5",children:k.map(a=>e.jsx("option",{children:a},a))})]})]})}function v({skipUrl:n}){const[l,a]=c.useState([{id:p(),accountName:"1000 · Cash (Main)",helperText:"This will be your default operating account.",bankLabel:"",openingBalance:"0",currency:"CAD"}]),[o,i]=c.useState(!1),[d,h]=c.useState("manual"),x=c.useMemo(()=>l[0],[l]);function b(){a(s=>[...s,{id:p(),accountName:"New bank account",helperText:"Additional bank or cash account.",bankLabel:"",openingBalance:"0",currency:(x==null?void 0:x.currency)||"CAD"}])}function f(s,t){a(m=>m.map(r=>r.id===s?{...r,...t}:r))}async function g(){var s;i(!0);try{const t=(s=document.querySelector("[name=csrfmiddlewaretoken]"))==null?void 0:s.value;if(!(await fetch("/api/bank/setup/save/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t||""},body:JSON.stringify({accounts:l})})).ok)throw new Error("Failed to save bank setup");window.location.href="/workspace/"}catch(t){console.error(t),alert("Error saving bank setup. Please try again.")}finally{i(!1)}}async function y(){var s;i(!0);try{const t=(s=document.querySelector("[name=csrfmiddlewaretoken]"))==null?void 0:s.value;if(!(await fetch("/api/bank/setup/skip/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t||""}})).ok)throw new Error("Failed to skip bank setup");const r="/workspace/";window.location.href=n||r}catch(t){console.error(t),alert("Error skipping setup. Please try again.")}finally{i(!1)}}return e.jsxs("div",{className:"flex min-h-screen w-full flex-col bg-slate-50",children:[e.jsx("header",{className:"sticky top-0 z-20 border-b bg-white/80 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between gap-4 px-4 py-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-900 md:text-2xl",children:"Bank Setup"}),e.jsx("p",{className:"max-w-xl text-sm text-slate-500",children:"Configure how Mini-Books talks to your bank. You can start with a simple manual import and add live feeds later."})]}),e.jsx("div",{className:"hidden items-center gap-3 sm:flex",children:e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-100 bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-700",children:[e.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-emerald-500"}),"Step 1 of 3 · Bank setup"]})})]})}),e.jsx("main",{className:"flex-1",children:e.jsx("div",{className:"mx-auto flex max-w-6xl flex-col gap-6 px-4 py-6 md:gap-8 md:py-8",children:e.jsxs("div",{className:"grid items-start gap-6 md:grid-cols-[minmax(0,2.2fr)_minmax(0,1.4fr)]",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between gap-3 border-b border-slate-100 px-4 py-3.5 md:px-6 md:py-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Connection mode"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Start simple with manual statement uploads. You can turn on live feeds later."})]})}),e.jsxs("div",{className:"grid gap-4 px-4 py-4 md:px-6 md:py-5",children:[e.jsxs("label",{className:`flex cursor-pointer items-start gap-3 rounded-2xl border px-4 py-3 transition-colors ${d==="manual"?"border-slate-900 bg-slate-50 ring-1 ring-slate-900":"border-slate-200 bg-white hover:border-slate-300"}`,children:[e.jsx("input",{type:"radio",name:"connectionMode",checked:d==="manual",onChange:()=>h("manual"),className:"mt-1 h-4 w-4 border-slate-300 text-slate-900 focus:ring-slate-400"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Manual import only"}),e.jsx("span",{className:"rounded-full bg-slate-900/90 px-2 py-0.5 text-[10px] uppercase tracking-wide text-white",children:"Recommended"})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Upload monthly statements (PDF/CSV) and let Mini-Books build a clean, auditable timeline of your bank activity."}),d==="manual"&&e.jsxs("div",{className:"mt-3 rounded-xl border border-slate-200 bg-white p-3 text-xs text-slate-600",children:[e.jsx("p",{className:"font-medium text-slate-900 mb-1",children:"How manual import works:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-1",children:[e.jsx("li",{children:"Define your bank accounts below."}),e.jsx("li",{children:'Click "Save bank setup".'}),e.jsx("li",{children:"You'll be taken to the dashboard where you can upload your first statement CSV."})]})]})]})]}),e.jsxs("label",{className:"flex cursor-not-allowed items-start gap-3 rounded-2xl border border-dashed border-slate-200 bg-white px-4 py-3 opacity-60",children:[e.jsx("input",{type:"radio",name:"connectionMode",disabled:!0,className:"mt-1 h-4 w-4 border-slate-300 text-slate-900 focus:ring-slate-400"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Live bank feeds"}),e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] uppercase tracking-wide text-slate-500",children:"Coming soon"})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Connect to your bank provider and stream transactions automatically into your inbox."})]})]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between gap-3 border-b border-slate-100 px-4 py-3.5 md:px-6 md:py-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Bank accounts in Mini-Books"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Tell us which chart of accounts represent real bank or cash accounts."})]})}),e.jsxs("div",{className:"flex flex-col gap-3 px-3.5 py-3.5 md:px-6 md:py-5",children:[e.jsxs("div",{className:"hidden grid-cols-[minmax(0,1.8fr)_minmax(0,1.3fr)_minmax(0,1fr)_auto] gap-3 text-[11px] font-medium uppercase tracking-wide text-slate-400 md:grid",children:[e.jsx("span",{children:"Account"}),e.jsx("span",{children:"Bank label (what you see on statements)"}),e.jsx("span",{className:"text-right",children:"Opening balance"}),e.jsx("span",{className:"text-right",children:"Currency"})]}),l.map(s=>e.jsx(w,{row:s,onChange:t=>f(s.id,t)},s.id)),e.jsx("button",{type:"button",onClick:b,className:"mt-1 inline-flex items-center justify-center rounded-xl border border-dashed border-slate-300 px-3 py-2 text-xs font-medium text-slate-600 hover:border-slate-400 hover:bg-slate-50",children:"+ Add another bank or cash account"})]})]})]}),e.jsxs("aside",{className:"space-y-4 md:space-y-5",children:[e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-900 text-slate-50 shadow-sm",children:e.jsxs("div",{className:"space-y-3 px-4 py-4 md:px-5 md:py-5",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-slate-800 text-[11px] font-semibold",children:"?"}),"How bank setup works"]}),e.jsx("p",{className:"text-xs text-slate-200/80",children:"Mini-Books keeps your bank feed calm and auditable. Start with a single operating account, import one statement, and you’re ready to reconcile."}),e.jsxs("ul",{className:"mt-2 space-y-1.5 text-xs text-slate-200/90",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-0.5 inline-block h-1.5 w-1.5 rounded-full bg-emerald-400"}),"Map at least one Cash/Bank account from your chart of accounts."]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-0.5 inline-block h-1.5 w-1.5 rounded-full bg-emerald-400"}),"Set an opening balance that matches your last bank statement."]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-0.5 inline-block h-1.5 w-1.5 rounded-full bg-emerald-400"}),"Upload your first statement from the Reconciliation page to start matching."]})]})]})}),e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:e.jsxs("div",{className:"space-y-3 px-4 py-4 md:px-5 md:py-5",children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Checklist before you go live"}),e.jsxs("ul",{className:"space-y-2 text-xs text-slate-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.length>0,readOnly:!0,className:"mt-0.5 h-3.5 w-3.5 rounded border-slate-300 text-slate-900 focus:ring-slate-500"}),e.jsx("span",{children:"At least one bank or cash account is mapped from your chart of accounts."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.some(s=>s.openingBalance!=="0"),readOnly:!0,className:"mt-0.5 h-3.5 w-3.5 rounded border-slate-300 text-slate-900 focus:ring-slate-500"}),e.jsx("span",{children:"Opening balance for your main operating account matches your last statement."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,className:"mt-0.5 h-3.5 w-3.5 rounded border-slate-300 text-slate-900 focus:ring-slate-500"}),e.jsx("span",{children:"Your accounting year start date is configured in settings."})]})]})]})}),e.jsx("div",{className:"rounded-2xl border border-transparent bg-transparent",children:e.jsxs("div",{className:"flex flex-col gap-2 md:gap-3",children:[e.jsx("button",{type:"button",onClick:g,disabled:o,className:"inline-flex items-center justify-center rounded-2xl bg-slate-900 px-4 py-2.5 text-sm font-medium text-slate-50 shadow-sm hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/50 focus-visible:ring-offset-1 disabled:opacity-50",children:o?"Saving...":"Save bank setup"}),e.jsx("button",{type:"button",onClick:y,disabled:o,className:"inline-flex items-center justify-center rounded-2xl border border-slate-300 bg-white px-4 py-2 text-xs font-medium text-slate-600 hover:bg-slate-50 disabled:opacity-50",children:"Skip for now · I’ll set this up later"})]})})]})]})})})]})}const u=document.getElementById("bank-setup-root");if(!u)throw new Error("Bank setup root element not found");const C=u.getAttribute("data-skip-url")||void 0;j.createRoot(u).render(e.jsx(N.StrictMode,{children:e.jsx(v,{skipUrl:C})}));
