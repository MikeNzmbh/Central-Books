import{r as m,j as s,a as j}from"./client-CnuwemY9.js";const f=({messages:e})=>!e||!e.length?null:s.jsx("div",{className:"space-y-2 mb-6",children:e.map((t,r)=>s.jsx("div",{className:`rounded-2xl border px-3.5 py-2 text-sm ${t.level==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-rose-200 bg-rose-50 text-rose-700"}`,children:t.message},`${t.message}-${r}`))}),g=({errors:e})=>e.length?s.jsx("ul",{className:"space-y-1 text-xs text-rose-600",children:e.map((t,r)=>s.jsx("li",{children:t},`${t}-${r}`))}):null,y=e=>{const t="w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2.5 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-900/80 focus:ring-offset-1 focus:ring-offset-slate-50",r=e.help_text||e.label;if(e.type==="textarea")return s.jsx("textarea",{id:e.id,name:e.name,defaultValue:e.value,className:`${t} min-h-[96px]`,placeholder:r,required:e.required});if(e.type==="select"&&e.choices)return s.jsx("select",{id:e.id,name:e.name,defaultValue:e.value,required:e.required,className:t,children:e.choices.map(l=>s.jsx("option",{value:l.value,children:l.label},l.value))});const n=e.type==="password"?"password":e.type==="email"?"email":"text";return s.jsx("input",{id:e.id,name:e.name,defaultValue:e.value,type:n,required:e.required,className:t,placeholder:r,autoComplete:e.name})},d=({title:e,subtitle:t,badge:r,children:n})=>s.jsxs("section",{className:"rounded-3xl bg-white border border-slate-200 shadow-sm p-5 sm:p-6 space-y-4",children:[s.jsxs("header",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:e}),t&&s.jsx("p",{className:"text-xs text-slate-500",children:t})]}),r]}),n]}),x=({spec:e,csrfToken:t,postUrl:r,label:n,twoColumn:l=!0})=>{if(!e)return s.jsxs("p",{className:"text-sm text-slate-500",children:["Complete your business setup to edit ",n.toLowerCase(),"."]});const i=o=>{const c=o.split("-");return c[c.length-1]},a=new Set(["first_name","last_name","currency","name"]),p=l?"grid gap-4 sm:grid-cols-2 text-sm":"space-y-4 text-sm";return s.jsxs("form",{method:"POST",action:r,className:"space-y-4",children:[s.jsx("input",{type:"hidden",name:"csrfmiddlewaretoken",value:t}),s.jsx("input",{type:"hidden",name:"form",value:e.form}),e.non_field_errors.length>0&&s.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-3.5 py-2 text-sm text-rose-700",children:e.non_field_errors.join(" ")}),s.jsx("div",{className:p,children:e.fields.map(o=>{const c=i(o.name),b=l&&a.has(c),h=`space-y-1.5 ${l&&!b?"sm:col-span-2":""}`;return s.jsxs("div",{className:h,children:[s.jsx("label",{className:"block text-slate-700 text-sm font-medium",htmlFor:o.id,children:o.label}),y(o),s.jsx(g,{errors:o.errors})]},o.name)})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",className:"inline-flex items-center rounded-full bg-slate-900 px-4 py-2.5 text-xs font-semibold text-white hover:bg-slate-800 active:bg-slate-900",children:["Save ",n.toLowerCase()]})})]})},v=({data:e})=>{var l,i;const t=m.useMemo(()=>[{id:"profile",label:"Account"},{id:"business",label:"Business"},{id:"password",label:"Password"},{id:"sessions",label:"Sessions"}],[]),[r,n]=m.useState("profile");return s.jsxs("div",{className:"min-h-[calc(100vh-40px)] bg-slate-50 text-slate-900",children:[s.jsx(f,{messages:e.messages}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsx("nav",{className:"flex lg:flex-col gap-2 rounded-3xl bg-white border border-slate-200 shadow-sm p-4 lg:w-64",children:t.map(a=>s.jsx("button",{type:"button",onClick:()=>n(a.id),className:`flex-1 lg:flex-none text-sm rounded-2xl px-3 py-2 border transition ${r===a.id?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-slate-200 hover:bg-slate-50"}`,children:a.label},a.id))}),s.jsxs("div",{className:"flex-1 space-y-6",children:[r==="profile"&&s.jsx(d,{title:"Your profile",subtitle:"Basics we use on invoices and emails.",children:s.jsx(x,{spec:e.profileForm,csrfToken:e.csrfToken,postUrl:e.postUrl,label:"Profile",twoColumn:!0})}),r==="business"&&s.jsx(d,{title:"Business details",subtitle:"How your workspace shows up on invoices and reports.",badge:s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-50 px-2.5 py-1 text-[11px] text-slate-600 border border-slate-200",children:"Workspace"}),children:s.jsx(x,{spec:e.businessForm,csrfToken:e.csrfToken,postUrl:e.postUrl,label:"Business",twoColumn:!0})}),r==="password"&&s.jsx(d,{title:"Password",subtitle:"Update your password to keep your books secure.",badge:s.jsx("span",{className:"inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-1 text-[11px] text-emerald-700 border border-emerald-100",children:"Recommended"}),children:s.jsx(x,{spec:e.passwordForm,csrfToken:e.csrfToken,postUrl:e.postUrl,label:"Password",twoColumn:!1})}),r==="sessions"&&s.jsx(d,{title:"Active sessions",subtitle:"Devices currently signed in to this account.",children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900",children:((l=e.session)==null?void 0:l.device)||"This device"}),s.jsxs("p",{className:"text-[11px] text-slate-500",children:[(i=e.session)!=null&&i.location?`${e.session.location} Â· `:"","Active now"]})]}),s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-0.5 text-[11px] text-emerald-700",children:[s.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),"Current"]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("a",{href:e.logoutUrl,className:"inline-flex items-center rounded-full border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",children:"Sign out of all sessions"})})]})})]})]})]})},u=document.getElementById("account-settings-root");function N(){const e=document.getElementById("account-settings-data");if(!e||!e.textContent)return null;try{return JSON.parse(e.textContent)}catch(t){return console.error("Unable to parse account settings payload",t),null}}if(u){const e=N();e&&j(u).render(s.jsx(v,{data:e}))}
