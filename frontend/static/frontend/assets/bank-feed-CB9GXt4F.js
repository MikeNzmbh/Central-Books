import{c as Ft,j as e,R as Vt,r as n}from"./index-CxMzsE8J.js";const Xt={NEW:"bg-sky-50 text-sky-700 ring-sky-100",PARTIAL:"bg-amber-50 text-amber-800 ring-amber-100",MATCHED_SINGLE:"bg-emerald-50 text-emerald-700 ring-emerald-100",MATCHED_MULTI:"bg-emerald-50 text-emerald-700 ring-emerald-100",EXCLUDED:"bg-slate-50 text-slate-500 ring-slate-100"},Bt={NEW:"New",PARTIAL:"Partial",MATCHED_SINGLE:"Matched",MATCHED_MULTI:"Matched (multi)",EXCLUDED:"Excluded"};function N(u){const p=typeof u=="number"?u:Number(u||0),P=p<0?"-":"",k=Math.abs(p).toFixed(2);return`${P}$${k}`}function Wt(u){if(typeof document>"u")return null;const p=document.cookie?document.cookie.split(";"):[];for(const P of p){const k=P.trim();if(k.startsWith(`${u}=`))return decodeURIComponent(k.substring(u.length+1))}return null}function it({status:u}){const p=Xt[u]||"bg-slate-50 text-slate-500 ring-slate-100";return e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-[11px] font-medium ring-1 ${p}`,children:Bt[u]||u})}function ct({side:u}){const p=u==="IN";return e.jsxs("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ring-1 ${p?"bg-emerald-50 text-emerald-700 ring-emerald-100":"bg-rose-50 text-rose-700 ring-rose-100"}`,children:[e.jsx("span",{className:"mr-1.5 h-1.5 w-1.5 rounded-full bg-current"}),p?"Money in":"Money out"]})}function Ht(){const[u,p]=n.useState([]),[P,k]=n.useState(!0),[$e,Pe]=n.useState(null),[C,Fe]=n.useState(null),[v,Ve]=n.useState({}),[me,Xe]=n.useState([]),[Be,pe]=n.useState(!1),[We,be]=n.useState(null),[he,xt]=n.useState([]),[fe,ut]=n.useState([]),[F,mt]=n.useState([]),[V,pt]=n.useState([]),[bt,ht]=n.useState([]),[ft,gt]=n.useState([]),[X,He]=n.useState(!0),[ze,Ge]=n.useState(null),[D,yt]=n.useState("ALL"),[M,jt]=n.useState("ALLOCATE"),[K,E]=n.useState(null),[Q,B]=n.useState(""),[W,Z]=n.useState(""),[Ye,ge]=n.useState(""),[ee,b]=n.useState(null),[te,y]=n.useState(null),[h,L]=n.useState(!1),[R,se]=n.useState({}),[O,H]=n.useState([]),[z,ye]=n.useState(""),[ae,je]=n.useState(""),[G,Ne]=n.useState(""),[ne,ve]=n.useState(""),[Y,we]=n.useState(""),[le,ke]=n.useState(""),[Nt,q]=n.useState(!1),[vt,oe]=n.useState(!1),[d,S]=n.useState({name:"",type:"EXPENSE",code:"",description:"",accountId:""}),[qe,Ce]=n.useState(null),[Ee,Je]=n.useState(!1),[wt,re]=n.useState(!1),[ie,Se]=n.useState("IN"),[Ae,Ke]=n.useState(""),[ce,Ie]=n.useState(""),[de,Te]=n.useState(""),[_e,De]=n.useState(""),[Qe,U]=n.useState(null),[Me,Ze]=n.useState(!1),et=n.useMemo(()=>Wt("csrftoken"),[]),A=n.useCallback(async()=>{k(!0),Pe(null);try{const t=await fetch("/api/banking/overview/",{credentials:"same-origin"});if(!t.ok)throw new Error("Unable to load bank accounts.");const l=((await t.json()).accounts||[]).map(o=>({id:o.id,name:o.name,last4:o.last4||"",ledgerBalance:Number(o.ledger_balance||0),ledgerAccountId:o.ledger_account_id??o.account_id??null,currency:o.currency||"USD"}));p(l),Fe(o=>{var x;return o&&l.some(f=>f.id===o)?o:((x=l[0])==null?void 0:x.id)??null})}catch(t){Pe(t instanceof Error?t.message:"Unable to load bank accounts.")}finally{k(!1)}},[]);n.useEffect(()=>{A()},[A]);const I=n.useCallback(async()=>{if(!C){Xe([]),Ve({}),E(null),be(null),pe(!1);return}pe(!0),be(null);const t=new URLSearchParams;t.set("account_id",String(C)),t.set("status",D);try{const s=await fetch(`/api/banking/feed/transactions/?${t.toString()}`,{credentials:"same-origin"});if(!s.ok)throw new Error("Unable to load transactions.");const l=await s.json(),o=(l.transactions||[]).map(c=>({id:c.id,date:c.date,description:c.description,amount:Number(c.amount||0),status:c.status,statusLabel:c.status_label||c.status,side:c.side,allocatedAmount:Number(c.allocated_amount||0),posted_journal_entry:c.posted_journal_entry||null,expense_candidates:c.expense_candidates||[],invoice_candidates:c.invoice_candidates||[]}));Xe(o),Ve({NEW:0,PARTIAL:0,MATCHED_SINGLE:0,MATCHED_MULTI:0,EXCLUDED:0,...l.status_counts||{}});const x=l.account||{},f=Number(x.ledger_balance??l.balance??0);p(c=>c.map(m=>m.id===C?{...m,ledgerBalance:f,ledgerAccountId:x.ledger_account_id??m.ledgerAccountId??null,currency:x.currency||m.currency}:m)),o.length>0?E(c=>c&&o.some(m=>m.id===c)?c:o[0].id):E(null)}catch(s){be(s instanceof Error?s.message:"Unable to load transactions.")}finally{pe(!1)}},[C,D]);n.useEffect(()=>{I()},[I]),n.useEffect(()=>{q(!1)},[C]);const T=n.useCallback(async(t,s)=>{const l=await fetch(t,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-CSRFToken":et||""},body:JSON.stringify(s||{})});if(!l.ok){let o="Unable to complete action.";try{const x=await l.json();o=(x==null?void 0:x.detail)||(x==null?void 0:x.error)||o}catch{}throw new Error(o)}try{return await l.json()}catch{return{}}},[et]),j=n.useMemo(()=>D==="ALL"?me:me.filter(t=>t.status===D),[me,D]);n.useEffect(()=>{if(j.length===0){E(null);return}if(!K){E(j[0].id);return}j.some(t=>t.id===K)||E(j[0].id)},[j,K]);const r=u.find(t=>t.id===C)||null,kt=(r==null?void 0:r.currency)||"USD",xe=n.useCallback(async()=>{He(!0),Ge(null);try{const t=await fetch("/api/banking/feed/metadata/",{credentials:"same-origin"});if(!t.ok)throw new Error("Unable to load categories.");const s=await t.json();xt(s.expense_categories||[]),ut(s.income_categories||[]),ht(s.suppliers||[]),gt(s.customers||[]),mt(s.expense_accounts||[]),pt(s.income_accounts||[])}catch(t){Ge(t instanceof Error?t.message:"Unable to load categories.")}finally{He(!1)}},[]);n.useEffect(()=>{xe()},[xe]);const a=j.find(t=>t.id===K)||j[0]||null;n.useEffect(()=>{if(!a){B(""),Z("");return}const t=a.side==="OUT"?he:fe;t.length>0?B(s=>s&&t.some(l=>String(l.id)===s)?s:String(t[0].id)):B(""),Z(""),se({}),H([]),ye(""),je(""),Ne(""),ve(""),we(""),ke("")},[a==null?void 0:a.id,he,fe]),n.useEffect(()=>{ge(""),b(null),y(null)},[a==null?void 0:a.id]);const Le=a&&a.side==="OUT"?he:fe,tt=a&&a.side==="OUT"?bt:ft,Ct=a&&a.side==="OUT"?"Supplier":"Customer",st=!!(a&&Q),Et=[{key:"ALL",label:"All",count:n.useMemo(()=>Object.keys(v).reduce((t,s)=>t+Number(v[s]||0),0),[v])},{key:"NEW",label:"New",count:v.NEW??0},{key:"PARTIAL",label:"Partial",count:v.PARTIAL??0},{key:"MATCHED_SINGLE",label:"Matched",count:v.MATCHED_SINGLE??0},{key:"MATCHED_MULTI",label:"Matched (multi)",count:v.MATCHED_MULTI??0},{key:"EXCLUDED",label:"Excluded",count:v.EXCLUDED??0}],_=(a==null?void 0:a.side)==="IN",at=a?_?a.invoice_candidates:a.expense_candidates:[],nt=2,Re=nt/100,g=n.useCallback(t=>{if(typeof t!="string")return 0;const s=Number(t);return Number.isFinite(s)?s:0},[]),lt=n.useCallback(()=>{var l;const t=(a==null?void 0:a.side)==="OUT"?"EXPENSE":"INCOME",s=t==="EXPENSE"?F:V;S({name:"",type:t,code:"",description:"",accountId:(l=s[0])!=null&&l.id?String(s[0].id):""}),Ce(null),oe(!0),q(!1)},[F,V,a==null?void 0:a.side]),St=n.useCallback(async()=>{Je(!0),Ce(null);const t={name:d.name,type:d.type,code:d.code,description:d.description,account_id:d.accountId?Number(d.accountId):null};try{const s=await T("/api/categories/",t),l=s==null?void 0:s.category;if(await xe(),l&&a){const o=a.side==="OUT"?"EXPENSE":"INCOME";l.type===o&&B(String(l.id))}oe(!1),b(null),y("Category created and ready to use.")}catch(s){Ce(s instanceof Error?s.message:"Unable to create category.")}finally{Je(!1)}},[d.accountId,d.code,d.description,d.name,d.type,xe,T,a]),At=n.useCallback(()=>{const t=(a==null?void 0:a.side)||"IN";Se(t),Ke((a==null?void 0:a.date)||new Date().toISOString().slice(0,10)),Ie(""),Te(""),De(""),U(null),re(!0),q(!1)},[a]),It=n.useCallback(async()=>{if(!r||!r.ledgerAccountId){U("Link this bank account to a ledger account before creating a transaction.");return}const t=Number(ce);if(!ce||!Number.isFinite(t)||t===0){U("Enter a non-zero amount.");return}if(!de.trim()){U("Add a description before saving.");return}Ze(!0),U(null);const s={date:Ae,amount:Math.abs(t),description:de.trim(),memo:_e.trim(),side:ie};try{await T(`/api/accounts/${r.ledgerAccountId}/manual-transaction/`,s),b(null),y("Transaction added to your feed."),re(!1),Ie(""),Te(""),De(""),await Promise.all([I(),A()])}catch(l){U(l instanceof Error?l.message:"Unable to create transaction.")}finally{Ze(!1)}},[r,A,I,T,ce,Ae,de,_e,ie]),Tt=n.useCallback((t,s)=>{se(l=>{const o={...l};return s?o[t.id]=t.amount.toFixed(2):delete o[t.id],o})},[]),_t=n.useCallback((t,s)=>{se(l=>({...l,[t]:s}))},[]),Dt=n.useCallback(()=>{if(!a)return;const t=`manual-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,s=a.side==="IN"?"DIRECT_INCOME":"DIRECT_EXPENSE";H(l=>[...l,{key:t,type:s,accountId:"",amount:""}])},[a]),Oe=n.useCallback((t,s)=>{H(l=>l.map(o=>o.key===t?{...o,...s}:o))},[]),Mt=n.useCallback(t=>{H(s=>s.filter(l=>l.key!==t))},[]),w=n.useMemo(()=>{if(!a)return{bankAmount:0,totalAllocations:0,candidateTotal:0,manualTotal:0,feeValue:0,roundingValue:0,overpaymentValue:0,expectedBank:0,remaining:0,allocationCount:0,isReady:!1};const t=Object.values(R).reduce(($,Ue)=>$+g(Ue),0),s=O.reduce(($,Ue)=>$+g(Ue.amount),0),l=t+s,o=g(ae),x=Number(ne),f=Number.isFinite(x)?x:0,c=g(le),m=Math.abs(a.amount),J=_?l+c-o-f:l+o+f,i=m-J,ue=Object.keys(R).length+O.filter($=>g($.amount)>0&&$.accountId).length,Ut=o>0,$t=f!==0,Pt=c>0,ot=l>0&&ue>0,rt=(!Ut||!!z)&&(!$t||!!G)&&(!Pt||!!Y&&_);return{bankAmount:m,totalAllocations:l,candidateTotal:t,manualTotal:s,feeValue:o,roundingValue:f,overpaymentValue:c,expectedBank:J,remaining:i,allocationCount:ue,hasAllocations:ot,hasRequiredAccounts:rt,isReady:ot&&rt}},[R,O,ae,ne,le,z,G,Y,g,a,_]),Lt=async()=>{if(!a||!Q){b("Select a category before posting this entry.");return}L(!0),b(null),y(null);const t={category_id:Number(Q),memo:Ye};a.side==="OUT"&&W&&(t.supplier_id=Number(W)),a.side==="IN"&&W&&(t.customer_id=Number(W));try{await T(`/api/banking/feed/transactions/${a.id}/create/`,t),y("Entry posted to the ledger."),ge(""),Z(""),await Promise.all([I(),A()])}catch(s){b(s instanceof Error?s.message:"Unable to post this entry.")}finally{L(!1)}},Rt=async()=>{if(!a)return;const t=a.side==="IN",s=Object.entries(R).map(([i,ue])=>({id:Number(i),amountValue:g(ue)})).filter(i=>i.amountValue>0).map(i=>({type:t?"INVOICE":"BILL",id:i.id,amount:i.amountValue.toFixed(2)})),l=O.map(i=>({type:i.type,account_id:i.accountId?Number(i.accountId):null,amountValue:g(i.amount)})).filter(i=>i.account_id&&i.amountValue>0).map(i=>({type:i.type,account_id:i.account_id,amount:i.amountValue.toFixed(2)})),o=[...s,...l];if(o.length===0){b("Add at least one allocation amount.");return}const x={allocations:o,tolerance_cents:nt,operation_id:`banktx-${a.id}-${Date.now()}`},f=g(ae);z&&f>0&&(x.fees={account_id:Number(z),amount:f.toFixed(2)});const c=Number(ne),m=Number.isFinite(c)?c:0;G&&m!==0&&(x.rounding={account_id:Number(G),amount:m.toFixed(2)});const J=g(le);t&&Y&&J>0&&(x.overpayment={account_id:Number(Y),amount:J.toFixed(2)}),L(!0),b(null),y(null);try{const i=await T(`/api/banking/transactions/${a.id}/allocate/`,x);if(!(i!=null&&i.ok))throw new Error((i==null?void 0:i.error)||"Unable to allocate this transaction.");y("Allocation posted to the ledger."),se({}),H([]),ye(""),je(""),Ne(""),ve(""),we(""),ke(""),await Promise.all([I(),A()])}catch(i){b(i instanceof Error?i.message:"Unable to allocate this transaction.")}finally{L(!1)}},Ot=async()=>{if(a){L(!0),b(null),y(null);try{await T(`/api/banking/feed/transactions/${a.id}/exclude/`),y("Transaction excluded from review."),await Promise.all([I(),A()])}catch(t){b(t instanceof Error?t.message:"Unable to exclude this transaction.")}finally{L(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-6 py-8",children:[e.jsxs("header",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold tracking-[0.18em] text-slate-400 uppercase mb-2",children:"BANK FEED"}),e.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-900 mb-1",children:"Review bank transactions"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xl",children:"Match bank activity to invoices and expenses, or create new transactions directly from your feed."})]}),e.jsxs("div",{className:"flex flex-col items-stretch gap-3 sm:items-end",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[e.jsx("select",{className:"h-9 rounded-full border border-slate-200 bg-white px-3 text-xs font-medium text-slate-700 shadow-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-100",value:C??"",onChange:t=>Fe(t.target.value?Number(t.target.value):null),disabled:P||!u.length,children:u.map(t=>e.jsx("option",{value:t.id,children:`${t.name}${t.last4?` ••••${t.last4}`:""}`},t.id))}),e.jsx("a",{href:"/bank-feeds/new/",className:"inline-flex items-center rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 shadow-sm hover:bg-slate-50",children:"Import CSV"}),e.jsxs("div",{className:"relative",onMouseLeave:()=>q(!1),children:[e.jsx("button",{type:"button",onClick:()=>q(t=>!t),className:"inline-flex items-center rounded-full bg-slate-900 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-black",children:"+ Create"}),Nt&&e.jsxs("div",{className:"absolute right-0 z-20 mt-1 w-48 rounded-2xl border border-slate-200 bg-white p-1 text-left shadow-lg",children:[e.jsxs("button",{type:"button",onClick:lt,className:"flex w-full items-center justify-between rounded-xl px-3 py-2 text-[11px] font-medium text-slate-700 hover:bg-slate-50",children:[e.jsx("span",{children:"New category"}),e.jsx("span",{className:"text-slate-400",children:"⌘C"})]}),e.jsxs("button",{type:"button",onClick:At,disabled:!(r!=null&&r.ledgerAccountId),className:`flex w-full items-center justify-between rounded-xl px-3 py-2 text-[11px] font-medium ${r!=null&&r.ledgerAccountId?"text-slate-700 hover:bg-slate-50":"cursor-not-allowed text-slate-300"}`,children:[e.jsx("span",{children:"New transaction"}),e.jsx("span",{className:"text-slate-400",children:"⌘T"})]}),!(r!=null&&r.ledgerAccountId)&&e.jsx("p",{className:"px-3 pb-2 text-[10px] text-slate-400",children:"Link this bank to a ledger account to post manual transactions."})]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 text-right text-xs text-slate-500 shadow-sm",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-[0.18em] text-slate-400 mb-1",children:"Current balance (ledger)"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:r?N(r.ledgerBalance):"—"})]})]})]}),$e&&e.jsx("div",{className:"mb-4 rounded-2xl border border-rose-100 bg-rose-50 px-4 py-3 text-xs text-rose-600",children:$e}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,2.2fr)_minmax(0,3fr)]",children:[e.jsxs("section",{className:"rounded-3xl bg-white shadow-[0_18px_45px_rgba(15,23,42,0.06)] ring-1 ring-slate-100 flex flex-col min-h-[420px]",children:[e.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-100 px-4 py-3 sm:flex-row sm:items-center sm:justify-between sm:gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-shrink-0",children:[e.jsx("h2",{className:"text-[13px] font-semibold text-slate-900",children:"Imported transactions"}),e.jsx("p",{className:"text-[11px] text-slate-500",children:"Review and assign each line to keep your books up to date."})]}),e.jsx("div",{className:"w-full flex-1 sm:w-auto",children:e.jsx("div",{className:"flex max-w-full flex-wrap items-center gap-1 overflow-x-auto rounded-2xl bg-slate-50 p-2 sm:flex-nowrap sm:justify-end sm:rounded-full sm:p-1 sm:pl-2",children:Et.map(t=>e.jsxs("button",{type:"button",onClick:()=>yt(t.key),className:`flex-shrink-0 rounded-full px-2.5 py-1 text-[11px] font-medium transition ${D===t.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-800"}`,children:[e.jsx("span",{children:t.label}),e.jsx("span",{className:"ml-1 text-[10px] font-semibold text-slate-400",children:t.count??0})]},t.key))})})]}),e.jsx("div",{className:"border-b border-slate-100 px-4 py-2",children:e.jsx("input",{type:"search",placeholder:"Search description or amount",className:"h-8 w-full rounded-full border border-slate-200 bg-slate-50 px-3 text-xs text-slate-700 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",disabled:!0})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:We?e.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-10 text-center text-xs text-rose-500",children:e.jsx("p",{children:We})}):Be?e.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-10 text-center text-xs text-slate-400",children:e.jsx("p",{children:"Loading transactions…"})}):j.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center px-8 py-10 text-center text-xs text-slate-400",children:[e.jsx("p",{children:"No transactions for this filter yet."}),e.jsx("p",{className:"mt-1",children:"Try switching the status filter or importing a new CSV."})]}):e.jsx("ul",{className:"divide-y divide-slate-100",children:j.map(t=>{const s=a&&t.id===a.id;return e.jsx("li",{className:`cursor-pointer px-4 py-3 text-xs transition hover:bg-slate-50 ${s?"bg-slate-50":"bg-white"}`,onClick:()=>E(t.id),children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[11px] font-medium text-slate-500",children:t.date}),e.jsx(it,{status:t.status})]}),e.jsx("p",{className:"mt-1 truncate text-[13px] font-medium text-slate-900",children:t.description})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(ct,{side:t.side}),e.jsx("div",{className:`text-sm font-semibold ${t.amount>=0?"text-emerald-600":"text-rose-600"}`,children:N(t.amount)})]})]})},t.id)})})})]}),e.jsx("section",{className:"rounded-3xl bg-white shadow-[0_18px_45px_rgba(15,23,42,0.06)] ring-1 ring-slate-100 min-h-[420px] flex flex-col",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-b border-slate-100 px-6 py-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-semibold tracking-[0.16em] text-slate-400 uppercase",children:a.date}),e.jsx("h2",{className:"mt-1 text-sm font-semibold text-slate-900",children:a.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] text-slate-500",children:[e.jsx(ct,{side:a.side}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-50 px-2 py-0.5 font-medium text-slate-500 ring-1 ring-slate-100",children:"Bank feed"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-semibold ${a.amount>=0?"text-emerald-600":"text-rose-600"}`,children:N(a.amount)}),e.jsxs("div",{className:"mt-1 flex items-center justify-end gap-2 text-[11px] text-slate-500",children:["Status: ",e.jsx(it,{status:a.status})]}),e.jsxs("div",{className:"text-[11px] text-slate-500",children:["Allocated: ",N(a.allocatedAmount)]})]})]})}),e.jsx("div",{className:"border-b border-slate-100 px-6",children:e.jsx("nav",{className:"flex gap-4 text-xs font-medium text-slate-500",children:[{key:"ALLOCATE",label:"Allocate"},{key:"CREATE",label:"Create"},{key:"TRANSFER",label:"Transfer"},{key:"EXCLUDE",label:"Exclude"}].map(t=>e.jsxs("button",{type:"button",onClick:()=>jt(t.key),className:`relative py-3 transition ${M===t.key?"text-slate-900":"text-slate-500 hover:text-slate-800"}`,children:[t.label,M===t.key&&e.jsx("span",{className:"absolute inset-x-0 -bottom-px block h-[2px] rounded-full bg-sky-500"})]},t.key))})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 text-sm",children:[ee&&e.jsx("div",{className:"mb-3 rounded-2xl border border-rose-100 bg-rose-50 px-3 py-2 text-[11px] text-rose-600",children:ee}),te&&e.jsx("div",{className:"mb-3 rounded-2xl border border-emerald-100 bg-emerald-50 px-3 py-2 text-[11px] text-emerald-700",children:te}),M==="CREATE"&&e.jsxs("div",{className:"space-y-5 max-w-md",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Turn this bank line into a new expense or income entry. Mini-Books will post it to the right accounts in your ledger."}),ze&&e.jsx("div",{className:"rounded-2xl border border-rose-100 bg-rose-50 px-3 py-2 text-[11px] text-rose-600",children:ze}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Transaction type"}),e.jsxs("div",{className:"inline-flex gap-1 rounded-full bg-slate-50 p-1 text-xs font-medium",children:[e.jsx("button",{className:"rounded-full bg-white px-3 py-1 shadow-sm text-slate-900",children:a.amount>=0?"Income":"Expense"}),e.jsx("button",{className:"rounded-full px-3 py-1 text-slate-400",disabled:!0,children:"Transfer"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Category"}),e.jsx("button",{type:"button",onClick:lt,className:"text-[11px] font-semibold text-sky-600 hover:text-sky-700",disabled:X,children:"Create"})]}),e.jsx("select",{className:"h-9 w-full rounded-2xl border border-slate-200 bg-white px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100 disabled:cursor-not-allowed disabled:bg-slate-100",value:Q,onChange:t=>B(t.target.value),disabled:X||Le.length===0||h,children:Le.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),!X&&Le.length===0&&e.jsxs("p",{className:"mt-1 text-[11px] text-rose-500",children:["Add ",a.amount>=0?"income":"expense"," categories to your chart of accounts to post directly from the feed."]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:[Ct," (optional)"]}),e.jsxs("select",{className:"h-9 w-full rounded-2xl border border-slate-200 bg-white px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100 disabled:cursor-not-allowed disabled:bg-slate-100",value:W,onChange:t=>Z(t.target.value),disabled:h||tt.length===0,children:[e.jsx("option",{value:"",children:a.side==="OUT"?"No supplier":"No customer"}),tt.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"Memo"}),e.jsx("input",{className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"Internal note",value:Ye,onChange:t=>ge(t.target.value),disabled:h})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"button",onClick:Lt,disabled:!st||h||X,className:`inline-flex items-center rounded-full px-4 py-1.5 text-xs font-semibold text-white shadow-sm ${!st||h||X?"cursor-not-allowed bg-emerald-400":"bg-emerald-600 hover:bg-emerald-700"}`,children:h?"Posting…":"Create & post to ledger"})})]})]}),M==="ALLOCATE"&&a&&e.jsxs("div",{className:"space-y-5",children:[te&&e.jsx("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50 px-3 py-2 text-[11px] text-emerald-700",children:te}),ee&&e.jsx("div",{className:"rounded-2xl border border-rose-100 bg-rose-50 px-3 py-2 text-[11px] text-rose-600",children:ee}),e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-4",children:[e.jsx("div",{className:"mb-3 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-[11px] font-semibold text-slate-500 uppercase",children:["Suggested ",_?"invoices":"bills"]}),e.jsx("p",{className:"text-[11px] text-slate-500",children:"Select which documents this bank line belongs to."})]})}),e.jsx("div",{className:"space-y-3",children:at.length?at.map(t=>{const s=Object.prototype.hasOwnProperty.call(R,t.id),l=R[t.id]||"";return e.jsx("div",{className:"rounded-xl bg-white px-3 py-2 text-xs text-slate-700 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500",checked:s,onChange:o=>Tt(t,o.target.checked)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-slate-900",children:[t.invoice_number?`Invoice #${t.invoice_number}`:t.description||(_?"Invoice":"Bill"),t.customer?` · ${t.customer}`:""]}),e.jsxs("div",{className:"text-[11px] text-slate-500",children:[t.date," • ",N(t.amount)]})]})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"h-9 w-32 rounded-full border border-slate-200 bg-white px-3 text-right text-xs text-slate-800 outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100 disabled:bg-slate-100",value:l,disabled:!s,onChange:o=>_t(t.id,o.target.value)})]})},t.id)}):e.jsx("p",{className:"text-[11px] text-slate-500",children:"No suggestions yet."})})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white px-4 py-4",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-semibold text-slate-500 uppercase",children:"Additional splits"}),e.jsx("p",{className:"text-[11px] text-slate-500",children:"Send part of the amount directly to ledger accounts."})]}),e.jsx("button",{type:"button",onClick:Dt,className:"inline-flex items-center rounded-full bg-slate-900 px-3 py-1 text-[11px] font-semibold text-white shadow-sm hover:bg-black",children:"+ Add split"})]}),e.jsxs("div",{className:"space-y-3 text-xs",children:[O.length===0&&e.jsx("p",{className:"text-[11px] text-slate-500",children:"No manual splits yet."}),O.map(t=>{const s=a.side==="IN"?[{value:"DIRECT_INCOME",label:"Direct income"}]:[{value:"DIRECT_EXPENSE",label:"Direct expense"}];return e.jsx("div",{className:"rounded-xl border border-slate-100 bg-slate-50 px-3 py-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("select",{value:t.type,onChange:l=>Oe(t.key,{type:l.target.value}),className:"h-9 rounded-full border border-slate-200 bg-white px-3 text-xs outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100",disabled:s.length===1,children:s.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsx("input",{className:"h-9 flex-1 rounded-full border border-slate-200 bg-white px-3 text-xs outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100",placeholder:"Account ID",value:t.accountId,onChange:l=>Oe(t.key,{accountId:l.target.value})}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"h-9 w-28 rounded-full border border-slate-200 bg-white px-3 text-right text-xs outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100",placeholder:"Amount",value:t.amount,onChange:l=>Oe(t.key,{amount:l.target.value})}),e.jsx("button",{type:"button",onClick:()=>Mt(t.key),className:"text-[11px] font-medium text-rose-500 hover:text-rose-600",children:"Remove"})]})},t.key)})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white px-4 py-4",children:[e.jsx("p",{className:"text-[11px] font-semibold text-slate-500 uppercase mb-3",children:"Adjustments"}),e.jsxs("div",{className:"grid gap-3 text-xs md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[11px] font-medium text-slate-600",children:"Processor fee"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:flex-nowrap",children:[e.jsx("input",{className:"h-9 min-w-[150px] flex-1 rounded-full border border-slate-200 bg-slate-50 px-3 text-xs outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"Account ID",value:z,onChange:t=>ye(t.target.value)}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"h-9 w-32 flex-shrink-0 rounded-full border border-slate-200 bg-slate-50 px-3 text-right text-xs outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"0.00",value:ae,onChange:t=>je(t.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[11px] font-medium text-slate-600",children:"Rounding"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:flex-nowrap",children:[e.jsx("input",{className:"h-9 min-w-[150px] flex-1 rounded-full border border-slate-200 bg-slate-50 px-3 text-xs outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"Account ID",value:G,onChange:t=>Ne(t.target.value)}),e.jsx("input",{type:"number",step:"0.01",className:"h-9 w-32 flex-shrink-0 rounded-full border border-slate-200 bg-slate-50 px-3 text-right text-xs outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"0.00",value:ne,onChange:t=>ve(t.target.value)})]})]}),_&&e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-[11px] font-medium text-slate-600",children:"Overpayment → credit"}),e.jsxs("div",{className:"flex flex-col flex-wrap gap-2 sm:flex-row sm:items-center",children:[e.jsx("input",{className:"h-9 min-w-[180px] flex-1 rounded-full border border-slate-200 bg-slate-50 px-3 text-xs outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"Liability account ID",value:Y,onChange:t=>we(t.target.value)}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"h-9 w-32 flex-shrink-0 rounded-full border border-slate-200 bg-slate-50 px-3 text-right text-xs outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"0.00",value:le,onChange:t=>ke(t.target.value)})]})]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white px-4 py-4",children:[e.jsxs("div",{className:"grid gap-3 text-xs sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-medium text-slate-500 uppercase",children:"Bank amount"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:N(w.bankAmount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-medium text-slate-500 uppercase",children:"Allocated"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:N(w.totalAllocations)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-medium text-slate-500 uppercase",children:"Remaining"}),e.jsx("p",{className:`text-sm font-semibold ${Math.abs(w.remaining)<=Re?"text-emerald-600":"text-rose-600"}`,children:N(w.remaining)})]})]}),e.jsx("p",{className:"mt-2 text-[11px] text-slate-500",children:Math.abs(w.remaining)<=Re?`✓ Within tolerance (±$${Re.toFixed(2)})`:`⚠️ Remaining amount of ${N(w.remaining)} will be posted automatically as a rounding adjustment (use a rounding account to override the default).`}),e.jsx("div",{className:"pt-3",children:e.jsx("button",{type:"button",onClick:Rt,disabled:!w.isReady||h,className:`inline-flex w-full items-center justify-center rounded-full px-4 py-2 text-xs font-semibold shadow-sm ${!w.isReady||h?"cursor-not-allowed bg-slate-100 text-slate-400":"bg-slate-900 text-white hover:bg-black"}`,children:h?"Posting…":"Allocate"})})]})]}),M==="TRANSFER"&&e.jsxs("div",{className:"space-y-5 max-w-md",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Use a transfer when this movement is between your own accounts (for example, moving money from checking to savings)."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"From account"}),e.jsx("input",{className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",defaultValue:(r==null?void 0:r.name)||"",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-slate-600",children:"To account"}),e.jsx("input",{className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"e.g. Savings, Credit card"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{className:"inline-flex items-center rounded-full bg-sky-600 px-4 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-sky-700",children:"Record transfer"})})]})]}),M==="EXCLUDE"&&e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Exclude this line if it's a duplicate, personal transaction, or otherwise not relevant to your business books. It will remain in the feed but won't affect your reports."}),e.jsx("div",{className:"rounded-2xl border border-rose-100 bg-rose-50 px-3 py-3 text-[11px] text-rose-700",children:"You can always undo this later from the bank feed if you exclude something by mistake."}),e.jsx("button",{type:"button",onClick:Ot,disabled:!a||a.status!=="NEW"||h,className:`inline-flex items-center rounded-full px-4 py-1.5 text-xs font-semibold ring-1 ${!a||a.status!=="NEW"||h?"cursor-not-allowed bg-slate-100 text-slate-400 ring-slate-200":"bg-white text-rose-600 ring-rose-200 hover:bg-rose-50"}`,children:"Exclude from books"})]})]})]}):Be?e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center px-8 py-10 text-center text-xs text-slate-400",children:e.jsx("p",{children:"Loading transaction…"})}):e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center px-8 py-10 text-center text-xs text-slate-400",children:e.jsx("p",{children:"Select a transaction on the left to review or create a posting."})})})]})]})}),vt&&e.jsx("div",{className:"fixed inset-0 z-40 flex justify-end bg-slate-900/40",children:e.jsxs("div",{className:"flex h-full w-full max-w-lg flex-col bg-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.18em] text-slate-400",children:"Create category"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Add a new category without leaving this review."})]}),e.jsx("button",{type:"button",onClick:()=>oe(!1),className:"rounded-full border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-500 hover:bg-slate-50",children:"Close"})]}),e.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-5 py-4 text-xs text-slate-700",children:[qe&&e.jsx("div",{className:"rounded-2xl border border-rose-100 bg-rose-50 px-3 py-2 text-[11px] text-rose-600",children:qe}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Type"}),e.jsxs("div",{className:"inline-flex gap-1 rounded-full bg-slate-50 p-1 text-[11px] font-medium",children:[e.jsx("button",{type:"button",onClick:()=>{const t=F;S(s=>{var l;return{...s,type:"EXPENSE",accountId:(l=t[0])!=null&&l.id?String(t[0].id):""}})},className:`rounded-full px-3 py-1 ${d.type==="EXPENSE"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Expense"}),e.jsx("button",{type:"button",onClick:()=>{const t=V;S(s=>{var l;return{...s,type:"INCOME",accountId:(l=t[0])!=null&&l.id?String(t[0].id):""}})},className:`rounded-full px-3 py-1 ${d.type==="INCOME"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Income"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Name"}),e.jsx("input",{className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:d.type==="EXPENSE"?"e.g. Subscriptions":"e.g. Sales",value:d.name,onChange:t=>S(s=>({...s,name:t.target.value}))})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Code"}),e.jsx("input",{className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"Optional",value:d.code,onChange:t=>S(s=>({...s,code:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Account (optional)"}),e.jsxs("select",{className:"h-9 w-full rounded-2xl border border-slate-200 bg-white px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100",value:d.accountId,onChange:t=>S(s=>({...s,accountId:t.target.value})),children:[e.jsx("option",{value:"",children:"No linked account"}),(d.type==="EXPENSE"?F:V).map(t=>e.jsx("option",{value:t.id,children:`${t.code?`${t.code} · `:""}${t.name}`},t.id))]}),(d.type==="EXPENSE"?F:V).length===0&&e.jsxs("p",{className:"mt-1 text-[10px] text-slate-400",children:["Add ",d.type==="EXPENSE"?"expense":"income"," accounts in your COA to link this category."]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Description"}),e.jsx("textarea",{className:"min-h-[70px] w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"What does this category cover?",value:d.description,onChange:t=>S(s=>({...s,description:t.target.value}))})]})]}),e.jsxs("div",{className:"border-t border-slate-100 px-5 py-3 text-right",children:[e.jsx("button",{type:"button",onClick:()=>oe(!1),className:"mr-2 rounded-full border border-slate-200 bg-white px-3 py-1.5 text-[11px] font-medium text-slate-600 hover:bg-slate-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:St,disabled:Ee,className:`inline-flex items-center rounded-full px-4 py-1.5 text-[11px] font-semibold text-white shadow-sm ${Ee?"cursor-not-allowed bg-slate-400":"bg-emerald-600 hover:bg-emerald-700"}`,children:Ee?"Saving…":"Save category"})]})]})}),wt&&e.jsx("div",{className:"fixed inset-0 z-40 flex justify-end bg-slate-900/40",children:e.jsxs("div",{className:"flex h-full w-full max-w-md flex-col bg-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-5 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.18em] text-slate-400",children:"New transaction"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Post a manual bank line for review"})]}),e.jsx("button",{type:"button",onClick:()=>re(!1),className:"rounded-full border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-500 hover:bg-slate-50",children:"Close"})]}),e.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-5 py-4 text-xs text-slate-700",children:[Qe&&e.jsx("div",{className:"rounded-2xl border border-rose-100 bg-rose-50 px-3 py-2 text-[11px] text-rose-600",children:Qe}),!(r!=null&&r.ledgerAccountId)&&e.jsx("div",{className:"rounded-2xl border border-amber-100 bg-amber-50 px-3 py-2 text-[11px] text-amber-700",children:"Link this bank account to a ledger account before creating manual transactions."}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Type"}),e.jsxs("div",{className:"inline-flex gap-1 rounded-full bg-slate-50 p-1",children:[e.jsx("button",{type:"button",onClick:()=>Se("IN"),className:`rounded-full px-3 py-1 text-[11px] font-medium ${ie==="IN"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Money in"}),e.jsx("button",{type:"button",onClick:()=>Se("OUT"),className:`rounded-full px-3 py-1 text-[11px] font-medium ${ie==="OUT"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Money out"})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Date"}),e.jsx("input",{type:"date",className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",value:Ae,onChange:t=>Ke(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Amount"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"rounded-2xl bg-slate-50 px-2 py-1 text-[11px] text-slate-500",children:kt}),e.jsx("input",{type:"number",className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"0.00",value:ce,onChange:t=>Ie(t.target.value)})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Description"}),e.jsx("input",{className:"h-9 w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"What is this transaction for?",value:de,onChange:t=>Te(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 text-[11px] font-medium text-slate-500",children:"Memo (optional)"}),e.jsx("textarea",{className:"min-h-[70px] w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-800 outline-none focus:border-sky-400 focus:bg-white focus:ring-2 focus:ring-sky-100",placeholder:"Internal note",value:_e,onChange:t=>De(t.target.value)})]})]}),e.jsxs("div",{className:"border-t border-slate-100 px-5 py-3 text-right",children:[e.jsx("button",{type:"button",onClick:()=>re(!1),className:"mr-2 rounded-full border border-slate-200 bg-white px-3 py-1.5 text-[11px] font-medium text-slate-600 hover:bg-slate-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:It,disabled:Me||!(r!=null&&r.ledgerAccountId),className:`inline-flex items-center rounded-full px-4 py-1.5 text-[11px] font-semibold text-white shadow-sm ${Me||!(r!=null&&r.ledgerAccountId)?"cursor-not-allowed bg-slate-400":"bg-slate-900 hover:bg-black"}`,children:Me?"Saving…":"Save transaction"})]})]})})]})}const dt=document.getElementById("bank-feed-root");dt&&Ft.createRoot(dt).render(e.jsx(Vt.StrictMode,{children:e.jsx(Ht,{})}));
